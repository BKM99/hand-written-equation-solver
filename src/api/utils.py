from tensorflow.keras.models import load_model
import cv2
import numpy as np
import base64
from PIL import Image, ImageOps
from io import BytesIO


img_h = 32
img_w = 32
channels = 1

model = load_model('../model/tensorflow_model')

def prep_input_img(img):
    if img is not None:
        img=~img
        ret,thresh=cv2.threshold(img,127,255,cv2.THRESH_BINARY)
        ctrs,h=cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)
        cnt=sorted(ctrs, key=lambda ctr: cv2.boundingRect(ctr)[0])
        w=int(img_w)
        h=int(img_h)
        train_data=[]
        rects=[]
        for c in cnt :
            x,y,w,h= cv2.boundingRect(c)
            rect=[x,y,w,h]
            rects.append(rect)
        bool_rect=[]
        for r in rects:
            l=[]
            for rec in rects:
                flag=0
                if rec!=r:
                    if r[0]<(rec[0]+rec[2]+10) and rec[0]<(r[0]+r[2]+10) and r[1]<(rec[1]+rec[3]+10) and rec[1]<(r[1]+r[3]+10):
                        flag=1
                    l.append(flag)
                if rec==r:
                    l.append(0)
            bool_rect.append(l)
        dump_rect=[]
        for i in range(0,len(cnt)):
            for j in range(0,len(cnt)):
                if bool_rect[i][j]==1:
                    area1=rects[i][2]*rects[i][3]
                    area2=rects[j][2]*rects[j][3]
                    if(area1==min(area1,area2)):
                        dump_rect.append(rects[i])
        final_rect=[i for i in rects if i not in dump_rect]
        for r in final_rect:
            x=r[0]
            y=r[1]
            w=r[2]
            h=r[3]
            im_crop =thresh[y:y+h+10,x:x+w+10]
            im_resize = cv2.resize(im_crop,(img_h,img_w))
            im_resize=np.reshape(im_resize,(img_h,img_w,channels))
            train_data.append(im_resize)
    return train_data


def predict(img_arr):
    s=''
    for i in range(len(img_arr)):
        img_arr[i]=np.array(img_arr[i])
        img_arr[i]=img_arr[i].reshape(1,img_h,img_w,channels)
        result=model.predict_classes(img_arr[i])
        if(result[0]==12):
            s=s+'-'
        if(result[0]==11):
            s=s+'+'
        if(result[0]==10):
            s=s+'*'
        if(result[0]==0):
            s=s+'0'
        if(result[0]==1):
            s=s+'1'
        if(result[0]==2):
            s=s+'2'
        if(result[0]==3):
            s=s+'3'
        if(result[0]==4):
            s=s+'4'
        if(result[0]==5):
            s=s+'5'
        if(result[0]==6):
            s=s+'6'
        if(result[0]==7):
            s=s+'7'
        if(result[0]==8):
            s=s+'8'
        if(result[0]==9):
            s=s+'9'
    return s


def decode_base64_to_arr(base64_string):
    cleaned = ','.join(base64_string.split(',')[1:])
    image_data = bytes(cleaned, encoding='UTF-8')
    img = Image.open(BytesIO(base64.b64decode(image_data)))
    img_as_grayscale = ImageOps.grayscale(img)
    arr = np.asanyarray(img_as_grayscale)

    return arr

def solve(img_arr):
    prediction = predict(prep_input_img(img_arr))
    return eval(prediction)


if __name__ == '__main__':
    image_string = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAHCCAYAAAAXY63IAAAAAXNSR0IArs4c6QAAIABJREFUeF7t3dF22zgSBFD7/z9ae5QZzzqJbYIiCTaq7z7ukUT0LQSYipzk/fF4PN78jwABAgQIECBAgAABAhME3hWQCcoeQYAAAQIECBAgQIDALwEFxEYgQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQIECAAAECBKYJKCDTqD2IAAECBAgQIECAAAEFxB4gQIAAAQIECBAgQGCagAIyjdqDCBAgQIAAAQIECBBQQOwBAgQIECBAgAABAgSmCSgg06g9iAABAgQIECBAgAABBcQeIECAAAECBAgQIEBgmoACMo3agwgQIECAAAECBAgQUEDsAQIECBAgQIAAAQIEpgkoINOoPYgAAQIECBAgQIAAAQXEHiBAgAABAgQIECBAYJqAAjKN2oMIECBAgAABAgQIEFBA7AECBAgQILCQwPv7+0KrPW+pj8fjvA/zSQQI3CqggNzK//XDu14ur0bhUnpVzvsIEFhNwP3wdWLugdV2svV2F1BAiu0Al8t1gbigrrP1yQQIzBFwR4w7O/PH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gAABAgQIECgjoICUicJCCBAgQIAAAQIECOQLKCD5GZuQAAECBAgQIECAQBkBBaRMFBZCgAABAgQIECBAIF9AAcnP2IQECBAgQIAAAQIEyggoIGWisBACBAgQIECAAAEC+QIKSH7GJiRAgAABAgQIECBQRkABKROFhRAgQIAAAQIECBDIF1BA8jM2IQECBAgQIECAAIEyAgpImSgshAABAgQIECBAgEC+gAKSn7EJCRAgQIAAAQIECJQRUEDKRGEhBAgQIECAAAECBPIFFJD8jE1IgAABAgQIECBAoIyAAlImCgshQIAAAQIECBAgkC+ggORnbEICBAgQIECAAAECZQQUkDJRWAgBAgQIECBAgACBfAEFJD9jExIgQIAAAQIECBAoI6CAlInCQggQIECAAAECBAjkCygg+RmbkAABAgQIECBAgEAZAQWkTBQWQoAAAQIECBAgQCBfQAHJz9iEBAgQIECAAAECBMoIKCBlorAQAgQIECBAgAABAvkCCkh+xiYkQIAAAQIECBAgUEZAASkThYUQIECAAAECBAgQyBdQQPIzNiEBAgQIECBAgACBMgIKSJkoLIQAAQIECBAgQIBAvoACkp+xCQkQIECAAAECBAiUEVBAykRhIQQIECBAgAABAgTyBf4H0qN5by58qeEAAAAASUVORK5CYII='
    print(solve(decode_base64_to_arr(image_string)))
